<template>
<div>
<Menu/>
<Header/>
	<div class="all_content">
		<!--===== Product up section ========-->
		<div class="product_up_section">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="product_up_section_all">
							<div class="product_up_sec_left">
								<ul class="product_up_left_ul">
									<li>
										<i class="fas fa-home"></i>
									</li>
									<li>Product</li>
								</ul>
							</div>
							<div class="product_up_sec_right">
								<p>Product</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--===== Product up section End ========-->

		<div class="all_product_section">
			<div class="container">
				<div class="row">
					<!-- mibile and ipad filter -->
						<div class="d-lg-none d-block d-md-block">
							<div class="toggler_all">
								<i class="fas fa-filter"></i>
							</div>
						</div>		
					<!-- mibile and ipad filter -->
					<div class="col-md-12">
						<div class="row">
							<!--=====  product section left========-->
							<div class="col-md-3">
								<div class="all_toggle"></div>
								<div class="product_left_all">	
									<div class="d-lg-none d-block d-md-block close_btn">x</div>								
									<!-- categorie -->
									<div class="product_right_section_all mr_b15">
										<div class="pro_right_title">
											<h3>CATEGORIES</h3>
										</div>
										<div class="prod_right_section_btm">
											<ul class="prod_right_section_btm_ul">
												<li>
													<a href="">Desktop PC</a>
												</li>
												<li>
													<a href="">Laptop & Notebook</a>
												</li>
												<li>
													<a href="">Component</a>
												</li>
												<li>
													<a href="">Monitor</a>
												</li>
												<li>
													<a href="">UPS</a>
												</li>
												<li>
													<a href="">Tablet PC</a>
												</li>
												<li>
													<a href="">Offie Equipment</a>
												</li>
												<li>
													<a href="">Projector</a>
												</li>
												<li>
													<a href="">Camera</a>
												</li>
												<li>
													<a href="">Security Camera</a>
												</li>
												<li>
													<a href="">Networking</a>
												</li>
												<li>
													<a href="">Accessories</a>
												</li>
												<li>
													<a href="">Software</a>
												</li>
												<li>
													<a href="">Server & Storage</a>
												</li>
												<li>
													<a href="">Television</a>
												</li>
												<li>
													<a href="">Gadget</a>
												</li>
												<li>
													<a href="">Deals</a>
												</li>
											</ul>
										</div>
									</div>
									<!-- categorie -->
									
									<!-- range slider -->
									<div class="slidecontainer">  
										<p class="slidecontainer_p">Price Range</p>
										<input type="range" min="1" max="100" value="50" class="slider" id="myRange">
									  <div class="slider_input_sec">
											<input type="text" name="text" style="margin-right: 12px">
										  <input type="text" name="text">
									  </div>
									</div>

									<!-- range slider end -->
									
									<div class="product_right_section2">
										<div class="">
										</div>
										<div class="all_range_iteam">
											<!--iteam-->
											<div class="select_iteam">
												<div class="select_iteam_in">
													<p class="iteam_title">Screen Size</p>
													<i class="fas fa-plus"></i>
												</div>
												<div class="main_iteam">
													<ul class="main_iteam_ul">
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
													</ul>
												</div>
											</div>
										<!--iteam-->
										<!--iteam-->
											<div class="select_iteam">
												<div class="select_iteam_in">
													<p class="iteam_title">Ressolution</p>
													<i class="fas fa-plus"></i>
												</div>
												<div class="main_iteam">
													<ul class="main_iteam_ul">
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
													</ul>
												</div>
											</div>
										<!--iteam-->
										<!--iteam-->
											<div class="select_iteam">
												<div class="select_iteam_in">
													<p class="iteam_title">Features</p>
													<i class="fas fa-plus"></i>
												</div>
												<div class="main_iteam">
													<ul class="main_iteam_ul">
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
													</ul>
												</div>
											</div>
										<!--iteam-->
										<!--iteam-->
											<div class="select_iteam">
												<div class="select_iteam_in">
													<p class="iteam_title">Response Time</p>
													<i class="fas fa-plus"></i>
												</div>
												<div class="main_iteam">
													<ul class="main_iteam_ul">
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
													</ul>
												</div>
											</div>
										<!--iteam-->
										<!--iteam-->
											<div class="select_iteam">
												<div class="select_iteam_in">
													<p class="iteam_title">Refresh Time</p>
													<i class="fas fa-plus"></i>
												</div>
												<div class="main_iteam">
													<ul class="main_iteam_ul">
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
													</ul>
												</div>
											</div>
										<!--iteam-->
										<!--iteam-->
											<div class="select_iteam">
												<div class="select_iteam_in">
													<p class="iteam_title">Input Type</p>
													<i class="fas fa-plus"></i>
												</div>
												<div class="main_iteam">
													<ul class="main_iteam_ul">
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
														<li>
															<input type="checkbox" name="vehicle1" value="Bike"> Up to 13.9 inch
														</li>
													</ul>
												</div>
											</div>
										<!--iteam-->
										</div>
									</div>
									<div class="product_range_bottom">
										<a href="product-seventeen.html">
											<img src="img/razer-blackwidow-elite.jpg" alt="image">
										</a>
									</div>
								</div>
							</div> 
									<!--=====  product section left========-->

							<!--=====  product section right========-->

								<div class="col-lg-9 col-md-12 col-12">
									<div class="product_right_up_image">
										<img src="img/bbbb.jpg" alt="image">
									</div>
									<div class="product_input_section_all">
										<div class="row">
											<div class="col-lg-12 col-12 col-md-12">
											</div>
												<div class="col-lg-3 col-12">
													
												</div>
												<div class="col-lg-6 col-12">
												<h4 class="product_input_section__h4">
												</h4>
													<div class="product_input_section_one">
														<input class="form-control mt-3" type="text" name="text" placeholder="Search Product Brand here " @input="SearchProduct" >
													</div>
												</div>
												<div class="col-lg-5 col-12">
												</div>
											<div class="col-12 col-lg-12 col-md-12">
												
											</div>
										</div>
									</div>
								
										<Product  :notfound="productNotfound" :loadproducts="products" id="product_not_found"/>	
														
									<div class="pagination_section">
											<div class="pagination_left">
											<pagination :data="products"  :limit ="2" :show-disabled="true" :align="right" @pagination-change-page="getResults"></pagination>	

											</div>
											<div class="pagination_right">
												<p>SHOWING {{pagination.from}} TO {{pagination.to}} OF {{pagination.total}} ({{pagination.last_page}} PAGES)</p>
											</div>
										</div>
									</div>
								</div>
							<!--=====  product section right ========-->
						</div>
					</div>
				</div>
			</div>
		</div>
    <Footer/>
   </div>
</template>
<script>
import Header from './HeaderComponent'
import Footer from './FooterComponent'
import Menu from './MenuComponent'
import Product from './ProductComponent'
import pagination from 'laravel-vue-pagination'

import { mapGetters,mapActions} from 'vuex'
    export default {
    data(){
    return {
		searched:false,
		searchQuerry:'',
		productNotfound:false,
		 pagination: {
                from: 1,
                to: 5,
				total:0,
				total_pages:0
            }
    }
    },
	 props: ['loadproducts','right','notfound'],
     components:{
        Header,
        Menu,
        Footer,
		Product,
		pagination
    },
	methods:{
		getResults(page = 1) {
			this.$Progress.start()
			if(this.searched){
				axios.get('api/search/product/'+this.searchQuerry+'?page='+page).then((response)=>{
					 this.pagination.from = response.data.products.from;
                    this.pagination.to = response.data.products.to;
                    this.pagination.total = response.data.products.total;
                    this.pagination.last_page = response.data.products.last_page;
				this.$store.commit('Set_Product',response.data.products)
				this.$Progress.finish()
			})
			}else{
					// this.$Progress.start()
				axios.get('api/products?page=' + page)
					.then(response => {
						this.pagination.from = response.data.products.from;
                    this.pagination.to = response.data.products.to;
                    this.pagination.total = response.data.products.total;
					this.pagination.last_page = response.data.products.last_page;
						this.$store.commit('Set_Product',response.data.products)
						this.$Progress.finish()
					});
			}
		},
		SearchProduct(event){
			this.searchQuerry = event.target.value;
			this.searched = true;
				this.$Progress.start()
				// if(this.searchQuerry !== ''){
					axios.get('api/search/product/'+this.searchQuerry).then((response)=>{
						// console.log(response.data.products.data.length);
						if(response.data.products.data.length > 0){
							this.productNotfound=false;
							 this.pagination.from = response.data.products.from;
                    this.pagination.to = response.data.products.to;
                    this.pagination.total = response.data.products.total;
                    this.pagination.last_page = response.data.products.last_page;
							this.$store.commit('Set_Product',response.data.products)
							this.$Progress.finish()
						}else{
						this.productNotfound=true
						this.$Progress.fail()
						}
					}).catch((err)=>{
						this.$Progress.fail()
					})
				// }
		}
	},
    computed:{
		...mapGetters({
		products:'getAllProducts'	
		})  
    },
         mounted() {
               this.$store.dispatch('getProducts');
			   axios.get('api/products').then((response)=>{
 					this.pagination.total = response.data.products.total;
                    this.pagination.last_page = response.data.products.last_page;
			   })
             
        }
    }
</script>